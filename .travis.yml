matrix:
  include:
    - language: perl
      perl: "5.16"
    - language: perl
      perl: "5.14"
    - language: perl
      perl: "5.12"
    - language: perl
      perl: "5.10"
    - language: perl
      perl: "5.8"

services:
  - memcached

addons:
  apt_packages:
    # For installing DB_File.
    - libdb-dev
    # For Imager manipulating GIF.
    - libgif-dev
    # For dynamic publishing.
    - php5
    - php5-cli
    - php5-mysql
    - php5-gd
    - php5-memcache

before_script:
  - mysql -e "create database mt_test;"
  - mysql -uroot -e "grant all privileges on mt_test.* to mt@localhost;"

  # Some tests need mt-config.cgi.
  - cp ./t/mysql-test.cfg ./mt-config.cgi

  # Remove failed tests.
  - rm t/90-podcoverage.t

script:
  - PERL_HASH_SEED=0 prove t plugins/*/t

